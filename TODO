1. polyline logic
2. types and cleanup
3. frontend design